{"remainingRequest":"G:\\dev\\PlantManager\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\dev\\PlantManager\\frontend\\src\\components\\AuthUserForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\dev\\PlantManager\\frontend\\src\\components\\AuthUserForm.vue","mtime":1622302973400},{"path":"G:\\dev\\PlantManager\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\dev\\PlantManager\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\dev\\PlantManager\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\dev\\PlantManager\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgZ2V0RXJyb3IgfSBmcm9tICJAL3V0aWxzL2hlbHBlcnMiOwppbXBvcnQgQmFzZUJ0biBmcm9tICJAL2NvbXBvbmVudHMvQmFzZUJ0biI7CmltcG9ydCBCYXNlSW5wdXQgZnJvbSAiQC9jb21wb25lbnRzL0Jhc2VJbnB1dCI7CmltcG9ydCBBdXRoU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL0F1dGhTZXJ2aWNlIjsKaW1wb3J0IEZsYXNoTWVzc2FnZSBmcm9tICJAL2NvbXBvbmVudHMvRmxhc2hNZXNzYWdlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXV0aFVzZXJGb3JtIiwKICBjb21wb25lbnRzOiB7CiAgICBCYXNlQnRuLAogICAgQmFzZUlucHV0LAogICAgRmxhc2hNZXNzYWdlLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhc3RuYW1lOiBudWxsLAogICAgICBuYW1lOiBudWxsLAogICAgICBtaWRuYW1lOiBudWxsLAogICAgICBlbWFpbDogbnVsbCwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIG1lc3NhZ2U6IG51bGwsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoImF1dGgiLCBbImF1dGhVc2VyIl0pLAogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlVXNlcigpIHsKICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgIHRoaXMubWVzc2FnZSA9IG51bGw7CiAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgbGFzdG5hbWU6IHRoaXMubGFzdG5hbWUsCiAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgIG1pZG5hbWU6IHRoaXMubWlkbmFtZSwKICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgfTsKICAgICAgQXV0aFNlcnZpY2UudXBkYXRlVXNlcihwYXlsb2FkKQogICAgICAgIC50aGVuKCgpID0+IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJhdXRoL2dldEF1dGhVc2VyIikpCiAgICAgICAgLnRoZW4oKCkgPT4gKHRoaXMubWVzc2FnZSA9ICLQlNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC+0LHQvdC+0LLQu9C10L3Riy4iKSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiAodGhpcy5lcnJvciA9IGdldEVycm9yKGVycm9yKSkpOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxhc3RuYW1lID0gdGhpcy5hdXRoVXNlci5sYXN0bmFtZTsKICAgIHRoaXMubmFtZSA9IHRoaXMuYXV0aFVzZXIubmFtZTsKICAgIHRoaXMubWlkbmFtZSA9IHRoaXMuYXV0aFVzZXIubWlkbmFtZTsKICAgIHRoaXMuZW1haWwgPSB0aGlzLmF1dGhVc2VyLmVtYWlsOwogIH0sCn07Cg=="},{"version":3,"sources":["AuthUserForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuthUserForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <form @submit.prevent=\"updateUser\">\n    <BaseInput\n        type=\"text\"\n        label=\"Фамилия\"\n        name=\"lastname\"\n        v-model=\"lastname\"\n        placeholder=\"Фамилия\"\n        class=\"mb-2\"\n    />\n    <BaseInput\n        type=\"text\"\n        label=\"Имя\"\n        name=\"name\"\n        v-model=\"name\"\n        placeholder=\"Имя\"\n        class=\"mb-2\"\n    />\n    <BaseInput\n        type=\"text\"\n        label=\"Отчество\"\n        name=\"midname\"\n        v-model=\"midname\"\n        placeholder=\"Отчество (опционально)\"\n        class=\"mb-2\"\n    />\n    <BaseInput\n      type=\"email\"\n      label=\"E-mail\"\n      name=\"email\"\n      v-model=\"email\"\n      autocomplete=\"email\"\n      placeholder=\"email@plantmanager.ru\"\n      class=\"mb-4\"\n    />\n    <BaseBtn type=\"submit\" text=\"Обновить\" />\n    <FlashMessage :message=\"message\" :error=\"error\" />\n  </form>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { getError } from \"@/utils/helpers\";\nimport BaseBtn from \"@/components/BaseBtn\";\nimport BaseInput from \"@/components/BaseInput\";\nimport AuthService from \"@/services/AuthService\";\nimport FlashMessage from \"@/components/FlashMessage\";\n\nexport default {\n  name: \"AuthUserForm\",\n  components: {\n    BaseBtn,\n    BaseInput,\n    FlashMessage,\n  },\n  data() {\n    return {\n      lastname: null,\n      name: null,\n      midname: null,\n      email: null,\n      error: null,\n      message: null,\n    };\n  },\n  computed: {\n    ...mapGetters(\"auth\", [\"authUser\"]),\n  },\n  methods: {\n    updateUser() {\n      this.error = null;\n      this.message = null;\n      const payload = {\n        lastname: this.lastname,\n        name: this.name,\n        midname: this.midname,\n        email: this.email,\n      };\n      AuthService.updateUser(payload)\n        .then(() => this.$store.dispatch(\"auth/getAuthUser\"))\n        .then(() => (this.message = \"Данные пользователя обновлены.\"))\n        .catch((error) => (this.error = getError(error)));\n    },\n  },\n  mounted() {\n    this.lastname = this.authUser.lastname;\n    this.name = this.authUser.name;\n    this.midname = this.authUser.midname;\n    this.email = this.authUser.email;\n  },\n};\n</script>\n"]}]}